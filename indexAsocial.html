<!doctype html> 
  <head> 
    <link rel="stylesheet" href="/styles/asocialStyling.css">
    
  <meta charset>   
    <h1 style=" margin-left: 40%;">Reynolds BOID model</h1> 
  </head> 

  <body>
    
   <div id="GSIdisplay">
      <h2 style="float: right; margin-right: 20%">Group stability Index</h2>
      <div id="myDiv" style="float: right; clear: both"><!-- Plotly chart will be drawn inside this DIV --></div>
   </div>  

   
   <div style="clear: both; float: right; margin-right: 4%">

    <ul class="behaviorList" style="clear: both; list-style-type: none; float: left; padding-top: 7px">
      <li><input class="behaviorCheckBox" id="lightCheckBox" title="Asocial" type="checkbox"> Center light attraction</li>
      <li><input class="behaviorCheckBox" id="alignCheckBox" title="Align" type="checkbox"> Alignment</li>
      <li><input class="behaviorCheckBox" id="attractionCheckBox" title="Attraction" type="checkbox"> Attraction</li>
      <li><input class="behaviorCheckBox" id="avoidanceCheckBox" title="Avoidance" type="checkbox"> Avoidance</li>
      <li><input class="behaviorCheckBox" id="collisionCheckBox" title="Collision" type="checkbox"> Collision</li>
      <li><input class="behaviorCheckBox" id="wrapCheckBox" title="Wrap" type="checkbox"> Wrap</li>
      <li >
        <script type="text/javascript">   

                function convertArrayOfObjectsToCSV(args) {  
                    var result, ctr, keys, columnDelimiter, lineDelimiter, data;

                    data = args.data || null;
                    if (data == null || !data.length) {
                        return null;
                    }

                    columnDelimiter = args.columnDelimiter || ',';
                    lineDelimiter = args.lineDelimiter || '\n';

                    keys = Object.keys(data[0]);

                    result = '';
                    result += keys.join(columnDelimiter);
                    result += lineDelimiter;

                    data.forEach(function(item) {
                        ctr = 0;
                        keys.forEach(function(key) {
                            if (ctr > 0) result += columnDelimiter;

                            result += item[key];
                            ctr++;
                        });
                        result += lineDelimiter;
                    });

                  return result;
                }

           
                function downloadCSV(args) { 

                        console.log(args)

                        if(once) {
                          var data, filename, link;
                          var csv = convertArrayOfObjectsToCSV(args);
                          if (csv == null) return;

                          filename = args.filename || 'export.csv';

                          if (!csv.match(/^data:text\/csv/i)) {
                              csv = 'data:text/csv;charset=utf-8,' + csv;
                          }
                          data = encodeURI(csv);

                          link = document.createElement('a');
                          link.setAttribute('href', data);
                          link.setAttribute('download', filename);
                          link.click();
                        }

             
                        
                }



        </script>

        <button id="downloadGSI" onclick="downloadCSV(gsiLog)">Download GSI</button>
      </li>
    </ul>



    <ul class="behaviorList" style="list-style-type: none; float: right; padding-top:10px">
      <li>
        <div class="slidecontainer">
          <input type="range" min="1" max="100" value="50" class="slider" id="lightRange">
        </div>
      </li>
      <li>
        <div class="slidecontainer">
          <input type="range" min="1" max="100" value="50" class="slider" id="alignmentRange">
        </div>
      </li>
      <li>
        <div class="slidecontainer">
          <input type="range" min="1" max="100" value="50" class="slider" id="attractionRange">
        </div>
      </li>
      <li>
        <div class="slidecontainer">
          <input type="range" min="1" max="100" value="50" class="slider" id="avoidanceRange">
        </div>
      </li>
      <li>
        <div class="slidecontainer">
          <input type="range" min="1" max="100" value="50" class="slider" id="collisionRange">
        </div>
      </li>
    </ul>

    <ul style="list-style-type: none; float: right;">
      <li>
        <p id="lightDisplayVal"></p>
      </li>
      <li>
        <p id="alignmentDisplayVal"></p>
      </li>
      <li>
        <p id="attractionDisplayVal"></p>
      </li>
      <li>
        <p id="avoidanceDisplayVal"></p>
      </li>
      <li>
        <p id="collisionDisplayVal"></p>
      </li>
      
    </ul>

   </div>
   
  </body>
  
 <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.12.0/matter.js"></script>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.js"></script> -->

  <script src="/p5/p5.js"></script>
  <script src="/scripts/asocialReynolds.js"></script>

</html>